# CUPS 配置文件 - 支持 ARM64 和 HP 打印机
# 允许所有网络访问和 USB 设备支持

# 基本设置
MaxLogSize 2000000
LogLevel warn
SystemGroup lp
User lp
Group lp
Port 631
HostnameLookups off

# 网络访问设置 - 允许所有网络访问
Listen 0.0.0.0:631
Listen /var/run/cups/cups.sock

# 安全设置
DefaultAuthType Basic
WebInterface Yes

# 允许所有网络访问
<Location />
  Order allow,deny
  Allow all
</Location>

# 管理页面访问控制
<Location /admin>
  Order allow,deny
  Allow all
</Location>

# 配置页面访问控制
<Location /admin/conf>
  Order allow,deny
  Allow all
</Location>

# 作业管理
<Location /admin/jobs>
  Order allow,deny
  Allow all
</Location>

# 打印机管理
<Location /admin/printers>
  Order allow,deny
  Allow all
</Location>

# 连接管理
<Location /admin/classes>
  Order allow,deny
  Allow all
</Location>

# 用户管理
<Location /admin/users>
  Order allow,deny
  Allow all
</Location>

# 共享设置 - 允许所有网络发现
Browsing On
BrowseAllow all
BrowseOrder allow,deny
BrowseLocalProtocols CUPS
BrowseRemoteProtocols CUPS

# 打印机自动发现
<Location /printers>
  Order allow,deny
  Allow all
</Location>

# 类管理
<Location /classes>
  Order allow,deny
  Allow all
</Location>

# 作业管理
<Location /jobs>
  Order allow,deny
  Allow all
</Location>

# 打印机状态访问
<Location /printers>
  Order allow,deny
  Allow all
</Location>

# USB 设备支持
<Policy default>
  JobPrivateAccess default
  JobPrivateValues default
  SubscriptionPrivateAccess default
  SubscriptionPrivateValues default
  <Limit Create-Job Print-Job Print-URI Validate-Job>
    Allow all
  </Limit>
  <Limit Send-Document Send-URI Hold-Job Release-Job Restart-Job Purge-Jobs Set-Job-Attributes Create-Job-Subscription Renew-Subscription Cancel-Subscription Get-Notifications Reprocess-Job Cancel-Current-Job Suspend-Current-Job Resume-Job Cancel-My-Jobs Close-Job CUPS-Get-Document CUPS-Get-PPDs>
    Allow all
  </Limit>
  <Limit CUPS-Add-Modify-Printer CUPS-Delete-Printer CUPS-Add-Modify-Class CUPS-Delete-Class CUPS-Set-Default CUPS-Get-Devices>
    Allow all
  </Limit>
  <Limit Pause-Printer Resume-Printer Enable-Printer Disable-Printer Pause-Printer-After-Current-Job Hold-New-Jobs Release-Held-New-Jobs Deploy-Printer Remove-Printer>
    Allow all
  </Limit>
  <Limit Cancel-Job CUPS-Accept-Jobs CUPS-Reject-Jobs>
    Allow all
  </Limit>
  <Limit CUPS-Add-Modify-Printer CUPS-Delete-Printer CUPS-Add-Modify-Class CUPS-Delete-Class CUPS-Set-Default>
    Allow all
  </Limit>
  <Limit Pause-Printer Resume-Printer Enable-Printer Disable-Printer>
    Allow all
  </Limit>
  <Limit Cancel-Job>
    Allow all
  </Limit>
</Policy>
